- defer和async是script标签的两个属性，用于在不阻塞页面文档解析的前提下，控制脚本的下载和执行。 
> 介绍他们之前，我们有必要先了解一下页面的加载和渲染过程： 
1. 浏览器通过HTTP协议请求服务器，获取HMTL文档并开始从上到下解析，构建DOM； 
2. 在构建DOM过程中，如果遇到外联的样式声明和脚本声明，则暂停文档解析，创建新的网络连接，并开始下载样式文件和脚本文件； 
3. 样式文件下载完成后，构建CSSDOM；脚本文件下载完成后，解释并执行，然后继续解析文档构建DOM 
4. 完成文档解析后，将DOM和CSSDOM进行关联和映射，最后将视图渲染到浏览器窗口 
在这个过程中，脚本文件的下载和执行是与文档解析同步进行，也就是说，它会阻塞文档的解析，如果控制得不好，在用户体验上就会造成一定程度的影响。 
所以我们需要清楚的了解和使用defer和async来控制外部脚本的执行。 
在开发中我们可以在script中声明两个不太常见的属性：defer和async，下面分别解释了他们的用法： 
defer：用于开启新的线程下载脚本文件，并使脚本在文档解析完成后执行。 
async：HTML5新增属性，用于异步下载脚本文件，下载完毕立即解释执行代码。 
为了演示脚本的执行情况，进而介绍这两个属性的作用，我们先来搭建一个简单的服务器： 

关于defer我们需要注意下面几点： 
1. defer只适用于外联脚本，如果script标签没有指定src属性，只是内联脚本，不要使用defer 
2. 如果有多个声明了defer的脚本，则会按顺序下载和执行 
3. defer脚本会在DOMContentLoaded和load事件之前执行


外联的脚本是按照声明顺序执行的，内联脚本并没有遵守这个规则，另外，DOMContentLoaded和load事件依次被捕获，DOM的状态分别变为interactive和complete。


async和defer一样，不会阻塞当前文档的解析，它会异步地下载脚本，但和defer不同的是，async会在脚本下载完成后立即执行，如果项目中脚本之间存在依赖关系，不推荐使用async。 
关于async，也需要注意以下几点： 
1. 只适用于外联脚本，这一点和defer一致 
2. 如果有多个声明了async的脚本，其下载和执行也是异步的，不能确保彼此的先后顺序 
3. async会在load事件之前执行，但并不能确保与DOMContentLoaded的执行先后顺序

